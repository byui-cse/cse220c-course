<!-- uses https://highlightjs.org/
-->

<html>

<head>
	<link rel="shortcut icon" href="https://byui-cse.github.io/Language-Courses/site/images/fav.ico" type="image/x-icon">
        <script type="text/javascript">
                 var codeType = "JavaScript"
        </script>
        <script type="text/javascript" src="https://byui-cse.github.io/Language-Courses/site/highlight.pack.js"></script>
        <link rel="stylesheet" href="https://byui-cse.github.io/Language-Courses/site/highlight_styles/xcode.css">
        <link rel="stylesheet" href="https://byui-cse.github.io/Language-Courses/site/weekly.css">
        <script type="text/javascript" src="https://byui-cse.github.io/Language-Courses/site/weekly.js"></script>
	

</head>

<body onload="fetchSource()">
<div class="hero-image">
  <div class="hero-text">
    <h1>CSE 220c: Week 01</h1>
    <p>Debugging Your Code</p>
  </div>
</div>
	<h1>Your Task</h1>

	<p>
		Each of your IDEs, <a href="https://visualstudio.microsoft.com/vs/community/">Visual Studio</a>, <a href="https://developer.apple.com/xcode/">Xcode</a>, or <a href="https://www.eclipse.org/ide/">Eclipse</a>  have tools built into them to make the creation and debugging of your code easier. Your task is to 
		experience and understand not only how the stepwise debugger for your IDE works, but to see how it can help you when you have a logic error in 
		your code. In other words, when your code isn't doing what you think it should, you use the stepwise debugger to find out what it is actually doing 
		so you can track down the flaw in your thinking and code. Once you've found the flaw, you can brainstorm about how to change your code so it works 
		as you intended.
	</p>
	<p>
		There will be many actions you will take described for you based on which IDE you use. Read and follow all the descriptions. First, download <a href="example_source/stepwise_debugging_v2.cpp">stepwise_debugging_v2.cpp</a>. You'll use it to help you learn how to use the stepwise debugger. 
		
	</p>

	<h2>Visual Studio Users</h2>
	<p>(Mac users <a href="#xcode">skip to the next section</a> for Xcode instructions)</p>
    <p>(Eclipse users <a href="#eclipse">skip to the section</a> for Eclipse instructions)</p>
	<section class="callout">
		<p><strong>Note:</strong> Windows users should install <a href="https://visualstudio.microsoft.com/vs/community/">Visual Studio <em>Community</em></a>, NOT Visual Studio <em>Code</em>. These are two vastly different products. Visual Studio <em>Code</em> is a nice text editor with great extensions, but it is not the right tool for professional C++ development. Visual Studio <em>Community</em> is a full-featured IDE (Integrated Development Environment), including a modern C++ compiler and debugger. Both of these products from Microsoft are free. For this class, make sure you are using Visual Studio <em>Community</em>.</p>
	</section>
	<p>
		Run Visual Studio and create a new Console App project called <span class="file_name">learning_debugging</span>.
		Select the <span class="file_name">learning_debugging.cpp</span> file in your project and delete all the code there.
		Copy and paste the contents of the file you downloaded earlier into the <span
			class="file_name">learning_debugging.cpp</span> file in Visual Studio, then type Ctrl+S to save it. Don't try to
		fully understand all the code
		in the file for now; it will all be explained later. For the time being, just focus on completing and understanding the
		following:
	</p>
	<p>Start by clicking the gray area just to the left of the number <span class="file_name">37</span> on the left side of
		the Visual Studio window and you should see a red dot appear. This red dot indicates that a breakpoint has just been
		set in the code. Breakpoints are how you temporarily pause the code's execution so you can see what is actually
		going on in the code rather than what you think might be going on. You are now ready to use Visual Studio's built-in
		stepwise debugger. <img src="images/visual-studio-debug-set-breakpoint-v2.png"
			alt=""></p><!--decorative-->
	<p>Click the green triangle button labeled "Local Windows Debugger" near the top center of the Visual Studio
		window. This will compile your code and begin running it in debugger mode. You'll notice a black window pop open.
		This is where the output from the program will eventually appear, so leave this window open (even though it is blank
		right now). <img src="images/visual-studio-debug-start-console-v2.png" alt=""></p><!--decorative-->
	<p>After the compilation process completes, the application will run up to the breakpoint on line 37 and pause. </p>
	<p>You should see that the red dot breakpoint indicator you set earlier on line 37 now has a yellow arrow in it to
		indicate that the program is currently executing, but has paused on line 37, which has not yet executed. Let's make
		it execute. On the top center area of the Visual Studio window, look for a black dot with a bent arrow over it. When
		you hover the mouse over it (without clicking), a help message pops up, letting you know this is the <b>step over</b>
		button. Each time you click this button, the highlighted line of code executes. Let's try it. Click the <b>step over</b>
		button. <img src="images/visual-studio-debug-step-over-v2.png" alt="Visual Studio step over button" alt="The step over button
		is found in the action bar."></p>
	<p>The first thing you'll notice is the current line indicator arrow has moved down to the next line of code. Visual Studio has
		paused again and is waiting to execute that line. Next, hover your mouse over "currentDateAndTime" on line 37 in the
		code. You'll see a pop-up message with the value of this variable displayed. If you look in the pane at the bottom
		left of the Visual Studio window, you'll also see this same variable with its value. You can use either of these methods to keep
		track of the values of any variable you create in your code.</p>
	<p>Select the <b>step over</b> button again. Line 39 has now executed. In the black window that popped open earlier, you
		should see "It is now" followed by the current date and time. This is the Visual Studio console. We use <span
			class="file_name">cout</span> in C++ to display output in the console, similar to using <span
			class="file_name">print</span> in Python. We typically use <span class="file_name">cout</span> to print out debug
		messages. Whether you use a debug statement like this or the stepwise debugger is situationally dependent. Your
		instructor and your own experience will help you decide when it is best to use which option. </p>
	<img src="images/visual-studio-console.png"
		alt="Visual Studio console window showing the message 'It is now' followed by what ever the current date is">
	<p>Select the <b>step over</b> button once more so that the debugger is paused on line 43. This line is different. While you will learn much more about this later, what
		you see in line 43 is a call to a C++ function that returns a value. That value is stored in the 'theTotal'
		variable. For this next step, please make sure you read carefully. If you were to click the <b>step over</b> button again (please don't actually do it), you would then see the sum of the numbers 1 through 10 in the theTotal variable, but we are going to do something much more interesting.</p>
	<p>Next to the <b>step over</b> button, there is another button. This one is a black dot with an arrow pointing down to it.
		If you move your mouse over it, a help message pops up letting you know that this is the 'step into' button. Go ahead
		Move your mouse over it and a help message pops up letting you know that this is the 'step into' button. Go ahead
		and click it.</p>
	<p>You'll see that the highlighted line of code jumped to line 21. That's because you stepped into--instead of over--the total C++
		function. To continue, click the <b>step over</b> button. You can watch the value of each number in theNumbers get
		added to the sum.</p>
	<p>Eventually, the numbers will all have been added to the sum and the debugger will be on line 28. Move your mouse over sum or
		find it in the bottom-left-hand pane and you will find that the total is 55. It is important to realize you know this
		BEFORE the function returns the value.</p>
	<p>Select <b>step over</b> again, and the highlighted code moves back to line 43. Select <b>step over</b> one more time and the result
		of the calculation, 55, is stored in the theTotal variable. With your next click, cout prints out the next debug
		statement including the value 55, in the console window.</p>
	<h2 id="xcode">Xcode Users</h2>
	<p>Run Xcode and create a new project called <span class="file_name">learning_debugging</span> following the same process you did in the reading. Double-click 
		the file you downloaded earlier. Copy the contents of the file. Then select the <span class="file_name">main.cpp</span> file in your project 
		and remove the code you find there and paste in the code you just copied. There is code in this file that will look 
		strange to you. Don't try to fully understand it right now. Each of the things you see will be explained later. For now, just focus 
		on completing and understanding the following actions.
	</p>
	<p>
		Start by clicking on the number <span class="file_name">37</span> on the left of the center pane of the Xcode window. This area is called 'the gutter' 
		and shows you the line numbers for your code. You will see a blue indicator show up in the gutter. This indicator is showing you where a 'break point' 
		has just been set in the code. Breakpoints are how you temporarily pause the code's execution so you can see what is actually going on in 
		the code rather than what you think might be going on. You are now ready to use Xcode's built-in stepwise debugger and should see this.
		<img src="images/xcode-debug-set-breakpoint-v2.png" alt="Xcode running, the main.cpp file being selected is displayed, and a break point has been set."/>
		Now click the triangular run button in the upper-left-hand of the window. This will start the compilation process and run your code for you. 
	</p>
	<p>
		After the compilation process completes, the application will run up to the breakpoint on line 37.
		<img src="images/xcode-debug-step-over-v2.png" alt="Xcode running the application up to the break point. The values for 
		all current variables are shown in the bottom-left pane."/>
	</p>
	<p>What you now see is a bounded green selection including all the 
		code for line 37. At this point in time, line 37 has not executed. Let's make it execute. On the left-hand side of the top part of the bottom pane that just showed up,
		 you will see a bar with a bent arrow over it. It looks kind of like a squinty eye with a weird eyebrow. When you move your mouse over it, without clicking, a 
		help message pops up letting you know this is the <b>step over</b> button. Each time you click this button, the highlighted line of code executes. 
		Let's give it a go. Select the <b>step over</b> button.
	</p>
	<p>
		The first thing you'll notice is that the highlighter has moved to the next line of code. Now you know Xcode is waiting to execute that line. 
		Next, move your mouse over 'currentDateAndTime' in the code. As you do, it gets outlined and the value of this variable is displayed. Now 
		you don't have to guess what the value is. If you look in the left-hand part of the bottom pane, you will also see this same variable 
		with its value. You can use whichever way you like to keep track of the values of any variable you create in your code.
	</p>
	<p>
		Click the <b>step over</b> button again. Now line 39 has executed. In the bottom-right pane of Xcode is the console.  There you see "It is now " followed 
		by the current date and time. You use <span class="file_name">cout</span> in C++ to print out debug statements. Whether you choose to use a debug statement or 
		the stepwise debugger is situationally dependent. Your instructor, and your own experience, help you decide when it is best to use which option.
	</p>
	<p>
		The debugger is now 'stopped' on line 43. Line 43 is different. While you will learn much more about this later, what you see in line 43 is a call to a 
		C++ function that returns a value. That value is stored in the 'theTotal' variable. Now...if you were to select the <b>step over</b> button again (remember, don't actually select the button), 
		you would then see the sum of the numbers 1 through 10 in the theTotal variable, but we are going to do something much more interesting. 
	</p>
	<p>
		Next to the <b>step over</b> button, there is another button. This one is a bar with an arrow pointing down to it. Move your mouse over it and a help 
		message pops up letting you know that this is the 'step into' button. Go ahead and click it.
	</p>
	<p>Wow! The highlighted line of code jumped to line 23! That's because you stepped into, instead of over, the <span class="file_name">total</span> C++ function. 
		Now, as you select the <b>step over</b> button, you can watch the value of each number in theNumbers get added to the sum.
	</p>
	<p>
		Eventually, the numbers have all been added to the sum and the debugger is on line 28. Move your mouse over sum or find it in the bottom-left-hand pane and 
		you will see that the total is 55. It is important to realize you know this BEFORE the function returns the value.
	</p>
	<p>
		Select <b>step over</b> again, and the highlighted code moves back to line 43. Select <b>step over</b>
		one more time and the result of the calculation, 55, is stored in the theTotal variable. 
		With your next click, cout prints out the next debug statement including the value 55.
	</p>

	<h2 id="eclipse">Eclipse Users</h2>
    <p>Run Eclipse and open the Project Explorer. This can be found in the menu Window..Show View..Project Explorer. Make sure that all existing projects are closed. You can close any open projects by right-clicking on an open project and selecting the option "Close Project". Then create a new project by Choosing the menu option File..New..Project. Choose a C++ Project from the wizard selector and hit the Next button. Then you will type in the project name: learning_debugging. Choose to use a "Hello World C++ Project" on the left and a "Linux GCC" or "MinGW" Toolchain on the right. Eclipse might ask you if you want to Open the C/C++ Perspective. If this occurs, accept this choice by pushing the "Open Perspective" button. Your new project should appear in the Project Explorer with an arrow to the left indicating that it can be opened. Use Ctrl-A on the file you just downloaded to select all the text, and Copy it. Then move over to the project main file, select all of the text, and Paste to replace the contents of the project file with the program we're going to debug. Save the file.
    </p>
    <p>Now we need to start debugging the code. The first time we run the program, we need to create a debug configuration. Click on the green bug icon in the top row of icons. A dialog box will pop up that has a few choices. Choose "Local C/C++ Application" and push the OK button. If Eclipse reports an error then you should use the hammer icon to build the application first. If you are successful, Eclipse will ask you if you want to open the Debug perspective. You should push the "Switch" button to confirm this change.</p>
    <p>You should now see a screen that looks similar to this:</p>
    <p><img src="images/eclipse-debug-start.png" alt="Eclipse running with the current line highlighted."/></p>
    <p>The current line is highlighted in green in the center pane. We will now create a breakpoint. On line 37, right click in the gutter to the left of the line number and select the option "Toggle Breakpoint". Now hit the Resume icon in the top row of icons (this looks like a green arrow next to a yellow bar).</p>
    <p>Your program should now be stopped at line 37. Your program is temporarily stopped, waiting for your command, and has not yet executed the highlighted line. Push the "Step Over" button to execute the line of code. This button looks like a yellow arrow that is jumping over a small line. As you hover over the icons a text description will appear. Find the one that says "Step Over" and push it once. Your code should now have executed the code on line 37 and is now on line 39. You can verify that line 37 was executed by looking at the variables pane to the right. The currentDateAndTime variable was just changed and the new value is highlighted in yellow. You should see something like this:</p>
    <p><img src="images/eclipse-debug-datechanged.png" alt="Eclipse running with a changed variable highlighted."/></p>
    <p>Push the Step Over button once more. You will see the output from the program appear in the Console pane at the bottom. </p>
    <p>Push the Step Over button once more. You should now be stopped on line 43. This line contains a function call. We want to see the details of what is performed inside this function, so instead of Step Over we will now use Step Into. It should be just to the left of the Step Over button and looks like a yellow arrow pointing to the middle of a line.</p>
    <p>Once you step into the function, you will find yourself on line 23 inside the <span class="file_name">total</span> function. You will also notice that the variables have changed on the right. The variables pane will only show the local variables in the current function. Another name for this is the stack frame. You can select different stack frames in the Debug pane on the left. If you are stopped on line 23 you should the stack frame on the left that's highlighted say it's in the <span class="file_name">total()</span> function. You can click on the other stack frame for the <span class="file_name">main()</span> function to see those variables instead.</p>
    <p>Step Over the next few instructions. You will find yourself in a loop. Inside this loop, we access one number from our array at a time, placing the value in the <span class="file_name">anInt</span> variable, which is then added to our running total in <span class="file_name">sum</span>. Step through this and make sure you understand what is happening. Once the loop ends, you will be on line 28 and will see that the total is now 55. It is important to realize you know this before the function returns the value.</p>
    <p>Select Step Over again until the highlighted code moves back to line 45. You should see that <span class="file_name">theTotal</span> now contains the return value from our function, 55. One more Step Over and this information will be shown in the console pane.</p>
        
	<h2>Final thoughts</h2>
	<p>
		Novices and professionals alike use the stepwise debugger. When your code is acting up, it lets you see <i>exactly</i> what your code is doing, so you don't have to think that you know. Rule number one of debugging your code is, "Never assume you know what your code is doing." If you follow this rule and use the stepwise debugger, your code debugging time will drop dramatically.
	</p>
	<p>
		Play around with this a little bit. Change the numbers being passed to the total function and see what happens.
	</p>

	<footer>
		<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License"
			  style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />This work is
		licensed
		under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0
		   International License</a>.
	 </footer>
</body>
</html>
